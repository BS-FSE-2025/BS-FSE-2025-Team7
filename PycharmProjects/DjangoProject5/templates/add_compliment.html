<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Compliment</title>

    <!-- Embed Google Maps Iframe for static location preview (optional) -->
    <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3506.2233913121413!2d77.4051603706222!3d28.50292593193056!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x390ce626851f7009%3A0x621185133cfd1ad1!2sGeeksforGeeks!5e0!3m2!1sen!2sin!4v1585040658255!5m2!1sen!2sin"
            width="400"
            height="300"
            frameborder="0"
            style="border:0;"
            allowfullscreen=""
            aria-hidden="false"
            tabindex="0">
    </iframe>
</head>
<body>
    <h1>Share Your Compliment</h1>

    <!-- Form to submit the compliment -->
    <form method="post">
        {% csrf_token %}
        {{ form.as_p }}

        <!-- Hidden inputs for latitude and longitude -->
        <input type="hidden" name="latitude" id="latitude">
        <input type="hidden" name="longitude" id="longitude">

        <!-- Map container for interactive map -->
        <div id="map" style="height: 400px; width: 100%;"></div>

        <!-- Submit button -->
        <button type="submit">Submit Compliment</button>
    </form>

    <!-- Load Google Maps API with your API key -->
    <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap" async defer></script>

    <script>
        let map, marker;

        // Initialize the Google Map
        function initMap() {
            map = new google.maps.Map(document.getElementById('map'), {
                center: { lat: 28.5029, lng: 77.4052 }, // Set default map center (you can change this)
                zoom: 15, // Zoom level
            });

            marker = new google.maps.Marker({
                map: map,
                draggable: true, // Allow the user to drag the marker
                position: map.getCenter(), // Set the marker position to the center of the map
            });

            // Update latitude and longitude hidden fields when the marker is moved
            google.maps.event.addListener(marker, 'position_changed', function() {
                let position = marker.getPosition();
                document.getElementById('latitude').value = position.lat();
                document.getElementById('longitude').value = position.lng();
            });
        }
    </script>
</body>
</html>
